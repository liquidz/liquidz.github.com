<!DOCTYPE html>
<html lang="ja"><head><meta charset="utf-8"><meta content="http://liquidz.github.com/img/site_image.png" property="og:image"><meta content="http://liquidz.github.com/img/site_image.png" property="image_src"><link href="/atom.xml" rel="alternate" title="Light Tableの簡単なプラグインを作ってみた" type="application/atom+xml"><title>Light Tableの簡単なプラグインを作ってみた</title><link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css"><link href="/css/prettify.css" rel="stylesheet" type="text/css"><link href="/css/sunburst.css" rel="stylesheet" type="text/css"><link href="/css/main.css" rel="stylesheet" type="text/css"><link href="/css/smartphone.css" media="only screen and (max-device-width:480px)" rel="stylesheet" type="text/css"></head><body id="top"><a class="github_ribbon" href="https://github.com/liquidz/"><img alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" style="position: absolute; top: 0; right: 0; border: 0;"></a><div class="container"><header><h1><a href="/">(code <span class="string"><span class="double-quote">"</span>liquidz.uo<span class="double-quote">"</span></span>)</a></h1></header><div class="contents"><article><div class="page-header"><h1 id="G__3105"><span>L</span>ight Tableの簡単なプラグインを作ってみた<a class="dagger" href="#G__3105">&dagger;</a></h1><p class="paragraph">12 Jan 2014</p></div><div class="post"><p class="paragraph"><a href="http://www.lighttable.com/">Light Table</a> 0.6.0 からオープンソースになり、さらにプラグインに対応したとのことで今、Light Table 熱がすごいですね。<br />    プラグインについての詳細なドキュメントはまだ出てないようですが、次々と新しいプラグインが作られているのを見て自分も負けてられないと思い、
    勉強のために既存のプラグインを参考に簡単なプラグインを作ってみました。</p><h2 id="G__3103"><span>t</span>railing-whitespace<a class="dagger" href="#G__3103">&dagger;</a></h2><ul><li><span><a href="https://github.com/liquidz/trailing-whitespace">https://github.com/liquidz/trailing-whitespace</a></span></li></ul><p class="paragraph">末尾に空白があった場合にそれを見やすく表示してくれるプラグインです。<br />    元々 Light Table には <code class="prettyprint">:lt.objs.editor.file/remove-trailing-whitespace</code> という設定があり保存時に末尾空白を削除してくれますが、例え保存してもファイルを開き直さない限り末尾空白が残ってしまうので、気付かずに行ごとコピーすると末尾空白も含まれてしまいます。<br />    そういったことを避けるために、このプラグインを使うと保存前でも末尾空白の存在を把握できるようになります。</p><p class="paragraph">このプラグインを作るにあたって、Light Table は <a href="http://codemirror.net/">CodeMirror</a> をベースにしているので、CodeMirror のアドオンを移植するのが一番簡単そうと思い、以下のアドオンをベースに選びました。</p><blockquote><p><a href="http://codemirror.net/addon/edit/trailingspace.js">edit/trailingspace.js</a></p><p>Adds an option showTrailingSpace which, when enabled, adds the CSS class cm-trailingspace to stretches of whitespace at the end of lines. </p></blockquote><p class="paragraph">メインとなる処理はほとんど JS のソースをそのまま ClojureScript に持っていっているだけですが、
    設定の有効・無効の切り替えなど Light Table 固有の箇所は以下のプラグインを参考にしました。</p><ul><li><span><a href="https://github.com/LightTable/Whitespace">Whitespace</a></span></li></ul><p class="paragraph">空白を可視化するというシンプルなプラグインでコードも短くわかりやすいです。
    実現したい目的と内容が近いので基本的にはこのプラグインのソースをベースにして作成しました。<br />    Light Table のプラグインを作ろうと思っている方はこのプラグインか次に紹介するプラグインを最初に参考すると良いと思います。</p><ul><li><span><a href="https://github.com/LightTable/Declassifier">Declassifier</a></span></li></ul><p class="paragraph">Light Table のサンプルプラグインです。公式ドキュメントからリンクが貼られているので見ている方も多いかと思います。<br />    特定の文字列を置き換えるというシンプルなプラグインなので、こちらも読みやすいです。
    これもプラグイン作成の良い教材なので最初に参考にすると良いです。</p><ul><li><span><a href="https://github.com/joshuafcole/claire">claire</a></span></li></ul><p class="paragraph">ファイル検索のプラグインです。
    0.6.0 が出てから数日で開発されたプラグインであまりの仕事の早さに驚きました。<br />    処理で参考にした部分はない(そこまで読めてない)のですが、プラグインの中にCSSファイルをどう取り込むかというところで
    プラグインの behaviors ファイルの書き方を参考にしました。</p><h2 id="G__3104"><span>最</span>後に<a class="dagger" href="#G__3104">&dagger;</a></h2><p class="paragraph">今回は既存のアドオンの移植だけなのでまだまだですが、これを機に他プラグインも研究してより便利なプラグインを作りたいなと思っています。
    そしていつかは Vimmer を卒gy ゲフンゲフン</p></div><div id="tweet_button"><a class="twitter-share-button" data-count="horizontal" data-lang="ja" href="https://twitter.com/share">ツイート</a><script src="//platform.twitter.com/widgets.js" type="text/javascript"></script></div><p class="gotop"><a href="#top">&raquo; Go page top</a></p></article>
<div id='disqus_thread'></div>
<script type='text/javascript'>
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'codeliquidzuo';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></noscript>
<a href='http://disqus.com' class='dsq-brlink'>blog comments powered by <span class='logo-disqus'>Disqus</span></a>
<script src="http://embedtweet.com/javascripts/embed_v2.js" type="text/javascript"></script></div><footer class="footer"><p class="right back_to_top"><a href="#">&uArr; Page Top</a></p><p><a href="/">Top</a>&nbsp;|&nbsp;<a href="/archives.html">Archives</a>&nbsp;|&nbsp;<a href="http://twitter.com/uochan">@uochan</a>&nbsp;2013<p class="paragraph"><a href="https://github.com/liquidz/misaki"><img alt="misaki" src="/img/misaki_banner.svg"></a></p></p></footer></div><script src="/js/prettify.js" type="text/javascript"></script><script src="/js/lang-clj.js" type="text/javascript"></script><script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="/js/jquery-contained-sticky-scroll-min.js" type="text/javascript"></script><script src="/js/coderwall.js" type="text/javascript"></script><script src="/js/main.js" type="text/javascript"></script></body></html>
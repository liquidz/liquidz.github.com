<!DOCTYPE html>
<html lang="ja"><head><meta charset="UTF-8"><meta content="http://liquidz.github.com/img/site_image.png" property="og:image"><meta content="http://liquidz.github.com/img/site_image.png" property="image_src"><link href="/atom.xml" rel="alternate" title="Play frameworkでHttpServletRequestを扱うメモ" type="application/atom-xml"><title>Play frameworkでHttpServletRequestを扱うメモ</title><link href="http://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css"><link href="/css/prettify.css" rel="stylesheet" type="text/css"><link href="/css/sunburst.css" rel="stylesheet" type="text/css"><link href="/css/main.css" rel="stylesheet" type="text/css"></head><body id="top"><a href="https://github.com/liquidz/"><img alt="Fork me on GitHub" src="https://a248.e.akamai.net/assets.github.com/img/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" style="position: absolute; top: 0; right: 0; border: 0;"></a><div class="wrapper"><header><h1><a href="/">(<span>code</span> <span class="string"><span class="double-quote">"</span>liquidz.uo<span class="double-quote">"</span></span>)</a></h1></header><div class="container"><article><div class="page-header"><h1><span>P</span>lay frameworkでHttpServletRequestを扱うメモ</h1><p>28 Feb 2012</p></div><div class="post"><p class="paragraph add">本記事の内容は Play framework 開発者の方々意向で
 ドキュメントに載せていない隠しAPI的な位置づけの機能を使っています。

 どうしても使わざるを得ない場合を除いては使わない方が良いかと思います。</p><p class="paragraph">ちょっとしたものを Play framework(Java) で書いて
   Tomcat上で動かすということをしているのですが、</p><ul><li><span>Apache ->(mod_proxy_ajp)-> Tomcat</span></li></ul><p class="paragraph">という連携でApacheからTomcatに渡される環境変数を
    playで受け取れなくて困っていました。</p><p class="paragraph">そこで色々調べたのですが HttpServletRequest を扱う方法がありました。</p><p class="paragraph" style="font-size: x-large;">隠されてましたが</p><blockquote><p><a href="https://github.com/playframework/play/pull/99">#99: Lighthouse 588 patch by grandfatha for playframework/play - Pull Request - GitHub</a></p></blockquote><p class="paragraph">すべてはここに書いてあります。
   ものすごく意訳すると</p><blockquote><p>こんなに美しくないアイデアはないけど、</p><p>Servlet APIにアクセスせざるを得ないユーザがいるのは事実。</p><p>モジュールに切り離せればベストだけどそれもできないからマージするよ。</p><p>でもこんなのドキュメントになんか書いてあげないんだからねっ！</p></blockquote><p class="paragraph">ということでコントローラ内から以下のコードでアクセスできます。</p><pre class="prettyprint">HttpServletRequest req = (HttpServletRequest)request.args.get(ServletWrapper.SERVLET_REQ);</pre><p class="paragraph">上記の通り、あえてドキュメントに書かれていないことなので
   2度目になりますが、どうしてもという場合以外は使わない方が良いと思います。</p></div><div id="tweet_button"><a class="twitter-share-button" data-count="horizontal" data-lang="ja" href="https://twitter.com/share">ツイート</a><script src="//platform.twitter.com/widgets.js" type="text/javascript"></script></div><p class="gotop"><a href="#top">&raquo; Go page top</a></p></article><script src="http://embedtweet.com/javascripts/embed_v2.js" type="text/javascript"></script></div><footer><p class="copy"><a href="/">Top</a>&nbsp;|&nbsp;<a href="/archives.html">Archives</a>&nbsp;|&nbsp;<a href="http://twitter.com/uochan">@uochan</a>&nbsp;2012</p><span>generated by </span><a href="https://github.com/liquidz/misaki"><img alt="misaki" src="/img/misaki_banner.png"></a></footer></div><script src="/js/prettify.js" type="text/javascript"></script><script src="/js/lang-clj.js" type="text/javascript"></script><script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="/js/jquery-contained-sticky-scroll-min.js" type="text/javascript"></script><script src="/js/coderwall.js" type="text/javascript"></script><script src="/js/main.js" type="text/javascript"></script></body></html>